{{define "tables"}}
<div class="tables-modern-page">
    <div class="tables-header">
        <div class="tables-header-content">
            <div>
                <h1 class="tables-title">ğŸª‘ Tables</h1>
                <p class="tables-subtitle">Live status and quick actions for every table on the floor</p>
            </div>
            <button type="button" class="btn-add-table" hx-get="/add-table" hx-target="#modal-root" hx-swap="innerHTML">
                <span class="btn-icon">+</span> Add Table
            </button>
        </div>

        {{if .Error}}
        <div class="flash-notification flash-error">
            <span class="flash-icon">âš ï¸</span>
            <span class="flash-message">{{.Error}}</span>
        </div>
        {{end}}
        {{if .Success}}
        <div class="flash-notification flash-success">
            <span class="flash-icon">âœ“</span>
            <span class="flash-message">{{.Success}}</span>
        </div>
        {{end}}
    </div>

    {{if .Tables}}
    <div class="tables-grid">
        {{range .Tables}}
        <div class="table-card">
            <div class="table-card-header">
                <div class="table-number-badge">{{.Number}}</div>
                <div class="status-badge status-{{.Status}}">{{.StatusLabel}}</div>
            </div>

            <div class="table-card-body">
                <div class="table-info-row">
                    <span class="table-info-label">Guests</span>
                    <span class="table-info-value">{{if .GuestCount}}{{.GuestCount}}{{else}}-{{end}}</span>
                </div>
                <div class="table-info-row">
                    <span class="table-info-label">Assigned</span>
                    <span class="table-info-value">{{.AssignedTo}}</span>
                </div>
                <div class="table-info-row">
                    <span class="table-info-label">Bill</span>
                    <span class="table-info-value table-bill">{{.Bill}}</span>
                </div>
                <div class="table-info-row">
                    <span class="table-info-label">Updated</span>
                    <span class="table-info-value table-time">{{.UpdatedAt}}</span>
                </div>
            </div>

            <div class="table-card-actions">
                <button type="button"
                        class="table-action-btn table-action-edit"
                        hx-get="/edit-table/{{.ID}}"
                        hx-target="#modal-root"
                        hx-swap="innerHTML"
                        hx-vals='{"number":"{{.Number}}","guest_count":"{{.GuestCount}}","status":"{{.Status}}"}'>
                    Edit
                </button>
                <button type="button"
                        class="table-action-btn table-action-delete"
                        hx-post="/delete-table/{{.ID}}"
                        hx-confirm="Delete table {{.Number}}?"
                        hx-target="body">
                    Delete
                </button>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="empty-state-modern">
        <div class="empty-state-icon">ğŸª‘</div>
        <h3>No tables yet</h3>
        <p>Get started by creating your first table</p>
        <button type="button" class="btn-add-table" hx-get="/add-table" hx-target="#modal-root" hx-swap="innerHTML">
            <span class="btn-icon">+</span> Add Your First Table
        </button>
    </div>
    {{end}}
</div>
{{end}}
